<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="robots" content="noindex,noarchive">
	<meta name="generator" content="Nette Tester">

	<title>Code coverage</title>

	<style type="text/css">
	html {
		font: 14px/1.5 Verdana,"Geneva CE",lucida,sans-serif;
		border-top: 7.7em solid #f4ebdb;
	}

	body {
		max-width: 990px;
		margin: -7.7em auto 0;
		background: #fcfaf5;
		color: #333;
	}

	footer {
		margin-left: .5em;
	}

	h1 {
		font-family: "Trebuchet MS","Geneva CE",lucida,sans-serif;
		font-size: 1.9em;
		margin: .5em;
		color: #7a7772;
		text-shadow: 1px 1px 0 white;
	}

	h1 small {
		font-size: 60%;
	}

	div.code {
		background: white;
		border: 1px dotted silver;
		padding: .4em 0;
		display: none;
		color: #333;
		overflow: auto;
	}

	code,
	div.code {
		font: 13px/1.3 monospace;
	}

	div.code > div {
		float: left;
		min-width: 100%;
		position: relative;
	}

	aside {
		min-width: 100%;
		position: absolute;
	}

	aside div {
		white-space: pre;
		padding-left: .7em;
	}

	aside a {
		color: #c0c0c0;
		display: block;
	}

	aside a:hover {
		color: inherit;
		font-weight: bold;
		text-decoration: none;
	}

	code {
		display: block;
		white-space: nowrap;
		position: relative;
	}

	i {
		font-style: normal;
	}

	a {
		color: #006aeb;
		text-decoration: none;
	}

	a:active,
	a:hover {
		text-decoration: underline;
	}

	td {
		vertical-align: middle;
	}

	small {
		color: gray;
	}

	.number {
		text-align: right;
		width: 50px;
	}

	.bar {
		border: 1px solid #acacac;
		background: #e50400;
		width: 35px;
		height: 1em;
	}

	.bar-empty {
		border: 1px solid transparent;
		background: transparent;
		width: 35px;
		height: 1em;
	}

	.bar div {
		background: #1a7e1e;
		height: 1em;
	}

	.light td {
		opacity: .5;
	}

	.light td * {
		color: gray;
	}

	.not-loaded td * {
		color: red;
	}

	.t { background-color: #e0ffe0; }
	.u { background-color: #ffe0e0; }

	code .hc { color: #929292; }
	code .hd { color: #333; }
	code .hh { color: #06B; }
	code .hk { color: #e71818; }
	code .hs { color: #008000; }

	.tabs {
		margin-bottom: 1.5em;
	}

	.tabs a {
		padding: .5em 1.5em;
		display: inline-block;
		font-size: 17px;
	}

	.tabs a.active,
	.tabs a:focus,
	.tabs a:hover {
		background-color: #fcfaf5;
		text-decoration: none;
	}

	.directory {
		display: none;
		margin-left: 1.5rem;
	}

	.directory.opened {
		display: block;
	}

	.toggle-dir {
		color: brown;
	}

	.toggle-dir:before {
		content: '▼ ';
	}

	.toggle-dir.opened:before {
		content: '▲ ';
	}

	.sort .up, .sort .no-sort, .sort .down {
		display: inline-block;
		padding-left: 5px;
		color: #c9302c
	}

	.sort .no-sort {
		color: #ccc
	}

	.sort .up, .sort .down, .sort .no-sort,
	.sort.desc:hover .up, .sort.desc:hover .down,
	.sort.asc .no-sort, .sort.down .no-sort, .sort.asc:hover .up, .sort:hover .no-sort {
		display: none
	}

	.sort:hover .up, .sort.asc .up,
	.sort.desc:hover .no-sort,
	.sort.asc:hover .down, .sort.desc .down {
		display: inline-block
	}
	</style>
</head>

<body>


<h1>
	Code coverage 70&nbsp;%
	<small>sources have 1,396 lines of code in 19 files</small>
</h1>

<nav class="tabs">
	<a href="#list" class="tab-item active">List</a>
	<a href="#tree" class="tab-item">Tree</a>
</nav>

<div class="tabs-content">
	<div id="list" class="tab-content">
		<table>
			<tbody>
			<tr>
				<td class="number">
					<a href="#" class="sort desc" data-sort="coverage"><span class="up">↓</span><span class="down">↑</span><span class="no-sort">&nbsp;</span>%</a>
				</td>
				<td>
					<div class="bar-empty"></div>
				</td>
				<td>
					<a href="#" class="sort" data-sort="path">path<span class="up">↓</span><span class="down">↑</span><span class="no-sort">&nbsp;</span></a>
				</td>
			</tr>
			</tbody>
		</table>
		<div id="files-content"></div>
	</div>
	<div id="tree" class="tab-content" style="display: none"></div>
</div>

<footer>
	<p>Generated by <a href="https://tester.nette.org">Nette Tester</a> at 2023/08/28 14:52:20</p>
</footer>

<script>
	(function() {
		let _files = {"F0":{"name":"classmap.php","file":"C:\\xampp\\htdocs\\orm\\src\\classmap.php","lines":[],"coverage":0,"total":0,"class":"light","digits":3,"lineCount":18,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Exception\/InvalidArgumentException.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Exception\/InvalidPropertyDefinitionException.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Exception\/InvalidStateException.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Exception\/MemberAccessException.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Exception\/NotSupportedException.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Reflection\/EntityType.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Reflection\/EntityProperty.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Exception\/exceptions.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Repository.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/EntityCollection.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Record.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/Entity.php'<\/i><i class=\"hk\">;\r<br>require_once&nbsp;<\/i><i class=\"hd\">__DIR__&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\/ModulIS\/MySqlDriver.php'<\/i><i class=\"hk\">;\r<br><\/i>\n<\/i>\n<\/code>"},"F1":{"name":"ModulIS\\Attribute\\ReadonlyProperty.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Attribute\\ReadonlyProperty.php","lines":[],"coverage":0,"total":0,"class":"light","digits":3,"lineCount":13,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Attribute<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">Attribute<\/i><i class=\"hk\">;\r<br>\r<br>#[<\/i><i class=\"hd\">Attribute<\/i><i class=\"hk\">]\r<br>class&nbsp;<\/i><i class=\"hd\">ReadonlyProperty\r<br><\/i><i class=\"hk\">{\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F2":{"name":"ModulIS\\Datatype\\Boolean.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Datatype\\Boolean.php","lines":{"17":1,"19":-2,"25":-2,"11":1,"13":1,"24":1,"27":1},"coverage":100,"total":5,"class":null,"digits":3,"lineCount":27,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Datatype<\/i><i class=\"hk\">;\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">Boolean&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">Datatype\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">int\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">is_bool<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Exception\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Invalid&nbsp;type&nbsp;for&nbsp;column&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">}<\/i><i class=\"hs\">'&nbsp;-&nbsp;'bool'&nbsp;expected,&nbsp;'\"&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">get_debug_type<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hs\">\"'&nbsp;given.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(bool)&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F3":{"name":"ModulIS\\Datatype\\Datatype.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Datatype\\Datatype.php","lines":{"9":-1,"15":-1,"23":1},"coverage":33,"total":3,"class":"light","digits":3,"lineCount":23,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Datatype<\/i><i class=\"hk\">;\r<br>\r<br>abstract&nbsp;class&nbsp;<\/i><i class=\"hd\">Datatype\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">(\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;abstract&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;abstract&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F4":{"name":"ModulIS\\Datatype\\DateTime.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Datatype\\DateTime.php","lines":{"17":1,"21":-2,"26":1,"28":1,"29":-2,"7":1,"11":1,"13":1,"20":1,"31":1},"coverage":100,"total":8,"class":null,"digits":3,"lineCount":31,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Datatype<\/i><i class=\"hk\">;\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">DateTime&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">Datatype\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\DateTime<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">__toString<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Exception\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Invalid&nbsp;type&nbsp;for&nbsp;column&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">}<\/i><i class=\"hs\">'&nbsp;-&nbsp;Instance&nbsp;of&nbsp;'\\\\Nette\\\\Utils\\\\DateTime'&nbsp;expected,&nbsp;'\"&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">get_debug_type<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hs\">\"'&nbsp;given.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\DateTime\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\DateTime<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F5":{"name":"ModulIS\\Datatype\\Json.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Datatype\\Json.php","lines":{"17":1,"21":-2,"26":1,"28":1,"29":-2,"11":1,"13":1,"20":1,"31":1,"7":1},"coverage":100,"total":8,"class":null,"digits":3,"lineCount":31,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Datatype<\/i><i class=\"hk\">;\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">Json&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">Datatype\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">is_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\Json<\/i><i class=\"hk\">::<\/i><i class=\"hd\">encode<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Exception\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Invalid&nbsp;type&nbsp;for&nbsp;column&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">}<\/i><i class=\"hs\">'&nbsp;-&nbsp;'array'&nbsp;expected,&nbsp;'\"&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">get_debug_type<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hs\">\"'&nbsp;given.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\Json<\/i><i class=\"hk\">::<\/i><i class=\"hd\">decode<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">[<\/i><i class=\"hd\">0<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\Json<\/i><i class=\"hk\">::<\/i><i class=\"hd\">FORCE_ARRAY<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F6":{"name":"ModulIS\\Entity.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Entity.php","lines":{"32":-2,"48":1,"52":1,"56":1,"60":-1,"61":-1,"63":-1,"70":-1,"71":-2,"89":1,"97":-1,"98":-1,"100":-1,"109":-1,"110":-2,"115":1,"119":1,"121":1,"124":1,"126":1,"129":-1,"130":-2,"142":-2,"147":-1,"148":-2,"153":1,"154":1,"156":1,"158":1,"160":1,"165":1,"167":1,"169":1,"171":1,"175":-1,"180":1,"181":-2,"189":1,"191":1,"193":1,"199":1,"201":1,"203":1,"205":1,"211":1,"213":1,"217":1,"221":1,"37":1,"38":1,"40":1,"42":1,"44":1,"46":1,"50":1,"54":1,"58":1,"67":1,"18":1,"20":1,"22":1,"24":1,"26":1,"31":1,"76":1,"77":1,"79":1,"81":1,"83":1,"85":1,"87":1,"91":1,"93":1,"95":1,"104":1,"106":1,"135":1,"136":1,"138":1,"141":1,"223":1},"coverage":85,"total":74,"class":null,"digits":4,"lineCount":223,"content":"<code style='margin-left: 4em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">ModulIS\\Reflection\\EntityProperty<\/i><i class=\"hk\">;\r<br>\r<br>abstract&nbsp;class&nbsp;<\/i><i class=\"hd\">Entity\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">Record&nbsp;$record<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;array&nbsp;<\/i><i class=\"hd\">$reflections&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Record<\/i><i class=\"hk\">|<\/i><i class=\"hd\">\\Nette\\Database\\Table\\ActiveRow<\/i><i class=\"hk\">|<\/i><i class=\"hd\">null&nbsp;$row&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">record&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">Record<\/i><i class=\"hk\">::<\/i><i class=\"hd\">create<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$ref&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getEntityProperties<\/i><i class=\"hk\">()&nbsp;as&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">toRecord<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">Record\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">record<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;&amp;<\/i><i class=\"hd\">__get<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$ref&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$prop&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getEntityProperty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$prop&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">EntityProperty<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">!==&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()&nbsp;==&nbsp;<\/i><i class=\"hs\">'array'<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Datatype\\Json<\/i><i class=\"hk\">::<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()&nbsp;==&nbsp;<\/i><i class=\"hs\">'bool'<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Datatype\\Boolean<\/i><i class=\"hk\">::<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()&nbsp;==&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\DateTime<\/i><i class=\"hk\">::class&nbsp;&amp;&amp;&nbsp;!<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\DateTime<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Datatype\\DateTime<\/i><i class=\"hk\">::<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(!<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isOfNativeType<\/i><i class=\"hk\">()&nbsp;&amp;&amp;&nbsp;!<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isOfExtraType<\/i><i class=\"hk\">()&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">class_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$type&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$typeClass&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">$type<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$typeClass<\/i><i class=\"hk\">::<\/i><i class=\"hd\">output<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\MemberAccessException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Cannot&nbsp;read&nbsp;an&nbsp;undeclared&nbsp;property&nbsp;<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()}<\/i><i class=\"hs\">::\\$<\/i><i class=\"hd\">$name<\/i><i class=\"hs\">.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__set<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$ref&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$prop&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getEntityProperty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$prop&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">EntityProperty<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">!==&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()&nbsp;==&nbsp;<\/i><i class=\"hs\">'array'<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Datatype\\Json<\/i><i class=\"hk\">::<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()&nbsp;==&nbsp;<\/i><i class=\"hs\">'bool'<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Datatype\\Boolean<\/i><i class=\"hk\">::<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()&nbsp;==&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\DateTime<\/i><i class=\"hk\">::class)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Datatype\\DateTime<\/i><i class=\"hk\">::<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(!<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isOfNativeType<\/i><i class=\"hk\">()&nbsp;&amp;&amp;&nbsp;!<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isOfExtraType<\/i><i class=\"hk\">()&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">class_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$type&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$typeClass&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">$type<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$typeClass<\/i><i class=\"hk\">::<\/i><i class=\"hd\">input<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">setValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\MemberAccessException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Cannot&nbsp;write&nbsp;to&nbsp;an&nbsp;undeclared&nbsp;property&nbsp;<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()}<\/i><i class=\"hs\">::\\$<\/i><i class=\"hd\">$name<\/i><i class=\"hs\">.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__isset<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$prop&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">getEntityProperty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$prop&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">EntityProperty<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$prop<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">)&nbsp;!==&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(<\/i><i class=\"hd\">\\ModulIS\\Exception\\MemberAccessException&nbsp;$e<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">Reflection\\EntityType\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$class&nbsp;<\/i><i class=\"hk\">=&nbsp;static::class;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$reflections<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">]))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$reflections<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">]&nbsp;=&nbsp;new&nbsp;<\/i><i class=\"hd\">Reflection\\EntityType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$reflections<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getModifiedArray<\/i><i class=\"hk\">():&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">record<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getModified<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">toArray<\/i><i class=\"hk\">(array&nbsp;<\/i><i class=\"hd\">$excludedProperties&nbsp;<\/i><i class=\"hk\">=&nbsp;[]):&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$ref&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$values&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getEntityProperties<\/i><i class=\"hk\">()&nbsp;as&nbsp;<\/i><i class=\"hd\">$name&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">array_search<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$excludedProperties<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">)&nbsp;!==&nbsp;<\/i><i class=\"hd\">false&nbsp;<\/i><i class=\"hk\">||&nbsp;<\/i><i class=\"hd\">$name&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hs\">'modifiedArray'<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(<\/i><i class=\"hd\">Exception\\MemberAccessException&nbsp;$ex<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isNullable<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\MemberAccessException<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$ex<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getMessage<\/i><i class=\"hk\">());\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Fill&nbsp;entity&nbsp;from&nbsp;array&nbsp;or&nbsp;ArrayHash\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">fillFromArray<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">\\Nette\\Utils\\ArrayHash&nbsp;$values<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$ref&nbsp;<\/i><i class=\"hk\">=&nbsp;static::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getEntityProperties<\/i><i class=\"hk\">()&nbsp;as&nbsp;<\/i><i class=\"hd\">$name&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isReadonly<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;NULL&nbsp;for&nbsp;nullable&nbsp;properties&nbsp;without&nbsp;value\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Skip&nbsp;if&nbsp;property&nbsp;not&nbsp;set&nbsp;and&nbsp;is&nbsp;not&nbsp;nullable\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">if(!isset(<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">])&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isNullable<\/i><i class=\"hk\">()&nbsp;&amp;&amp;&nbsp;empty(<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(!isset(<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">])&nbsp;&amp;&amp;&nbsp;!<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isNullable<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Convert&nbsp;strings&nbsp;to&nbsp;int\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">if(<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()&nbsp;==&nbsp;<\/i><i class=\"hs\">'int'&nbsp;<\/i><i class=\"hk\">&amp;&amp;&nbsp;!empty(<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">$name&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">intval<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">$name&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F7":{"name":"ModulIS\\EntityCollection.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\EntityCollection.php","lines":{"42":-1,"44":-1,"51":1,"53":1,"55":1,"60":-1,"61":-1,"64":1,"65":1,"67":1,"68":1,"71":1,"76":-1,"77":-2,"96":-1,"98":-1,"100":-1,"105":-1,"108":-1,"109":-1,"110":-2,"115":-1,"116":-1,"117":-1,"118":-2,"123":-1,"124":-1,"131":1,"132":1,"133":1,"134":1,"139":1,"140":1,"141":-2,"146":-1,"147":-2,"152":1,"153":1,"158":1,"159":-2,"169":-1,"174":-1,"183":-2,"9":1,"32":1,"33":1,"34":1,"38":1,"39":1,"46":1,"167":1,"172":1,"177":1,"179":1,"182":1,"185":1},"coverage":61,"total":49,"class":null,"digits":4,"lineCount":185,"content":"<code style='margin-left: 4em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\Table\\Selection<\/i><i class=\"hk\">;\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">EntityCollection&nbsp;<\/i><i class=\"hk\">implements&nbsp;<\/i><i class=\"hd\">\\Iterator<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">\\Countable\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;const&nbsp;<\/i><i class=\"hd\">ASC&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'ASC'<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;const&nbsp;<\/i><i class=\"hd\">DESC&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'DESC'<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">Selection&nbsp;$selection<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">string<\/i><i class=\"hk\">|<\/i><i class=\"hd\">\\Closure&nbsp;$entity<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">string<\/i><i class=\"hk\">|<\/i><i class=\"hd\">null&nbsp;$refTable<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">string<\/i><i class=\"hk\">|<\/i><i class=\"hd\">null&nbsp;$refColumn<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;?array&nbsp;<\/i><i class=\"hd\">$data<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">int<\/i><i class=\"hk\">|<\/i><i class=\"hd\">null&nbsp;$count<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;array&nbsp;<\/i><i class=\"hd\">$keys<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Selection&nbsp;$selection<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$refTable&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$refColumn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">selection&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$selection<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">refTable&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$refTable<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">refColumn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$refColumn<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\Callback<\/i><i class=\"hk\">::<\/i><i class=\"hd\">check<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">\\Closure<\/i><i class=\"hk\">::<\/i><i class=\"hd\">fromCallable<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(<\/i><i class=\"hd\">\\Exception&nbsp;$e<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">loadData<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">\\Closure<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$factory&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$class&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$factory&nbsp;<\/i><i class=\"hk\">=&nbsp;fn(<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">)&nbsp;=&gt;&nbsp;new&nbsp;<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">selection&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$record&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">refTable&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">null&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">$row&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">ref<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">refTable<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">refColumn<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data<\/i><i class=\"hk\">[]&nbsp;=&nbsp;<\/i><i class=\"hd\">$factory<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">toArray<\/i><i class=\"hk\">():&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">iterator_to_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;API:\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;code&gt;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$this-&gt;orderBy('column',&nbsp;EntityCollection::DESC);&nbsp;\/\/&nbsp;ORDER&nbsp;BY&nbsp;[column]&nbsp;DESC\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;\/\/&nbsp;or\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$this-&gt;orderBy('column&nbsp;DESC');&nbsp;\/\/&nbsp;ORDER&nbsp;BY&nbsp;[column]&nbsp;DESC\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;\/\/&nbsp;or\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;$this-&gt;orderBy([\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;'first'&nbsp;&nbsp;=&gt;&nbsp;EntityCollection::ASC,\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;'second'&nbsp;=&gt;&nbsp;EntityCollection::DESC,\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;];&nbsp;\/\/&nbsp;ORDER&nbsp;BY&nbsp;[first],&nbsp;[second]&nbsp;DESC\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;\/code&gt;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">orderBy<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string<\/i><i class=\"hk\">|array&nbsp;<\/i><i class=\"hd\">$column<\/i><i class=\"hk\">,&nbsp;?<\/i><i class=\"hd\">string&nbsp;$order&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">self\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">is_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$column<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$column&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$col&nbsp;<\/i><i class=\"hk\">=&gt;&nbsp;<\/i><i class=\"hd\">$ord<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">orderBy<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$col<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$ord<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">selection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">order<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$column&nbsp;<\/i><i class=\"hk\">.&nbsp;(<\/i><i class=\"hd\">$order&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hs\">'&nbsp;'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$order&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hs\">''<\/i><i class=\"hk\">));\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">invalidate<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">limit<\/i><i class=\"hk\">(?<\/i><i class=\"hd\">int&nbsp;$limit<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">int&nbsp;$offset&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">self\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">selection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">limit<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$limit<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$offset<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">invalidate<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">invalidate<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/\/&nbsp;===&nbsp;\\Iterator&nbsp;INTERFACE&nbsp;======================================\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">rewind<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">loadData<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">keys&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">array_keys<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">reset<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">keys<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">current<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">Entity\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">current<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">keys<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">false&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">false&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">key<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">current<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">keys<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">next<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">next<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">keys<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">valid<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">current<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">keys<\/i><i class=\"hk\">)&nbsp;!==&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/\/&nbsp;===&nbsp;\\Countable&nbsp;INTERFACE&nbsp;======================================\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$column&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">int\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$column&nbsp;<\/i><i class=\"hk\">!==&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">selection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$column<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">data<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">count&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">selection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'*'<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F8":{"name":"ModulIS\\Exception\\InvalidArgumentException.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Exception\\InvalidArgumentException.php","lines":{"11":1},"coverage":100,"total":1,"class":"light","digits":3,"lineCount":11,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Exception<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">InvalidArgumentException&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">\\InvalidArgumentException\r<br><\/i><i class=\"hk\">{\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F9":{"name":"ModulIS\\Exception\\InvalidPropertyDefinitionException.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Exception\\InvalidPropertyDefinitionException.php","lines":[],"coverage":0,"total":0,"class":"light","digits":3,"lineCount":11,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Exception<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">InvalidPropertyDefinitionException&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">InvalidStateException\r<br><\/i><i class=\"hk\">{\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F10":{"name":"ModulIS\\Exception\\InvalidStateException.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Exception\\InvalidStateException.php","lines":[],"coverage":0,"total":0,"class":"light","digits":3,"lineCount":11,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Exception<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">InvalidStateException&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">\\RuntimeException\r<br><\/i><i class=\"hk\">{\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F11":{"name":"ModulIS\\Exception\\MemberAccessException.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Exception\\MemberAccessException.php","lines":{"11":1},"coverage":100,"total":1,"class":"light","digits":3,"lineCount":11,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Exception<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">MemberAccessException&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">\\LogicException\r<br><\/i><i class=\"hk\">{\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F12":{"name":"ModulIS\\Exception\\NotSupportedException.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Exception\\NotSupportedException.php","lines":[],"coverage":0,"total":0,"class":"light","digits":3,"lineCount":11,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Exception<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">NotSupportedException&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">\\LogicException\r<br><\/i><i class=\"hk\">{\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F13":{"name":"ModulIS\\MySqlDriver.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\MySqlDriver.php","lines":{"29":-1,"39":-2,"17":1,"18":1,"20":1,"22":1,"23":1,"25":1,"27":1,"31":1,"33":1,"38":1,"10":1,"41":1},"coverage":92,"total":13,"class":null,"digits":3,"lineCount":41,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">Nette<\/i><i class=\"hk\">;\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\IStructure<\/i><i class=\"hk\">;\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">MySqlDriver&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">\\Nette\\Database\\Drivers\\MySqlDriver\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@note&nbsp;Returns&nbsp;associative&nbsp;array&nbsp;of&nbsp;detected&nbsp;types&nbsp;(IReflection::FIELD_*)&nbsp;in&nbsp;result&nbsp;set.\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">getColumnTypes<\/i><i class=\"hk\">(<\/i><i class=\"hd\">\\PDOStatement&nbsp;$statement<\/i><i class=\"hk\">):&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$types&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$count&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$statement<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">columnCount<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(<\/i><i class=\"hd\">$col&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">;&nbsp;<\/i><i class=\"hd\">$col&nbsp;<\/i><i class=\"hk\">&lt;&nbsp;<\/i><i class=\"hd\">$count<\/i><i class=\"hk\">;&nbsp;<\/i><i class=\"hd\">$col<\/i><i class=\"hk\">++)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$meta&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$statement<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getColumnMeta<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$col<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isset(<\/i><i class=\"hd\">$meta<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'native_type'<\/i><i class=\"hk\">]))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$types<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$meta<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'name'<\/i><i class=\"hk\">]]&nbsp;=&nbsp;<\/i><i class=\"hd\">$type&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">Nette\\Database\\Helpers<\/i><i class=\"hk\">::<\/i><i class=\"hd\">detectType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$meta<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'native_type'<\/i><i class=\"hk\">]);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$type&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">IStructure<\/i><i class=\"hk\">::<\/i><i class=\"hd\">FIELD_TIME<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$types<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$meta<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'name'<\/i><i class=\"hk\">]]&nbsp;=&nbsp;<\/i><i class=\"hd\">IStructure<\/i><i class=\"hk\">::<\/i><i class=\"hd\">FIELD_TIME_INTERVAL<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(<\/i><i class=\"hd\">$type&nbsp;<\/i><i class=\"hk\">==&nbsp;<\/i><i class=\"hd\">IStructure<\/i><i class=\"hk\">::<\/i><i class=\"hd\">FIELD_DATE&nbsp;<\/i><i class=\"hk\">||&nbsp;<\/i><i class=\"hd\">$type&nbsp;<\/i><i class=\"hk\">==&nbsp;<\/i><i class=\"hd\">IStructure<\/i><i class=\"hk\">::<\/i><i class=\"hd\">FIELD_DATETIME<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$types<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$meta<\/i><i class=\"hk\">[<\/i><i class=\"hs\">'name'<\/i><i class=\"hk\">]]&nbsp;=&nbsp;<\/i><i class=\"hd\">IStructure<\/i><i class=\"hk\">::<\/i><i class=\"hd\">FIELD_TEXT<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$types<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F14":{"name":"ModulIS\\Record.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Record.php","lines":{"34":-1,"36":-2,"42":-2,"48":-2,"55":-2,"60":-1,"61":-1,"62":-1,"63":-2,"68":-1,"69":-1,"70":-2,"76":-2,"91":-2,"98":1,"103":1,"108":1,"115":-2,"126":-1,"127":-2,"133":-2,"140":-1,"47":1,"81":1,"83":1,"84":1,"86":1,"87":1,"90":1,"132":1,"138":1,"142":1,"41":1,"53":1,"54":1,"75":1,"101":1,"106":1,"111":1,"112":1,"114":1,"147":1,"148":1,"149":1,"96":1,"22":1,"23":1,"28":1,"30":1,"120":1,"121":1,"151":1},"coverage":80,"total":41,"class":null,"digits":4,"lineCount":151,"content":"<code style='margin-left: 4em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\Table\\ActiveRow<\/i><i class=\"hk\">;\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\Table\\GroupedSelection<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">Record\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;?<\/i><i class=\"hd\">ActiveRow&nbsp;$row<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;array&nbsp;<\/i><i class=\"hd\">$values&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;array&nbsp;<\/i><i class=\"hd\">$modified&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(?<\/i><i class=\"hd\">ActiveRow&nbsp;$row&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">create<\/i><i class=\"hk\">(<\/i><i class=\"hd\">ActiveRow<\/i><i class=\"hk\">|<\/i><i class=\"hd\">self<\/i><i class=\"hk\">|<\/i><i class=\"hd\">null&nbsp;$row&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">self\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$row&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">null&nbsp;<\/i><i class=\"hk\">||&nbsp;<\/i><i class=\"hd\">$row&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">ActiveRow<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;static(<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">hasRow<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row&nbsp;<\/i><i class=\"hk\">!==&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getRow<\/i><i class=\"hk\">():&nbsp;?<\/i><i class=\"hd\">ActiveRow\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">setRow<\/i><i class=\"hk\">(<\/i><i class=\"hd\">ActiveRow&nbsp;$row<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">self\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">reload<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">ref<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$key<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">string&nbsp;$throughColumn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;?<\/i><i class=\"hd\">self\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">checkRow<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$native&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">ref<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$throughColumn<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$native&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">ActiveRow&nbsp;<\/i><i class=\"hk\">?&nbsp;new&nbsp;static(<\/i><i class=\"hd\">$native<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">related<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$key<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">string&nbsp;$throughColumn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">GroupedSelection\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">checkRow<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">related<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$throughColumn<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getModified<\/i><i class=\"hk\">():&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">update<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">checkRow<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$status&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isPersisted<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$status&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">update<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">reload<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$status<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;&amp;<\/i><i class=\"hd\">__get<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">array_key_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">array_key_exists<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">values<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\MemberAccessException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"The&nbsp;value&nbsp;of&nbsp;column&nbsp;'<\/i><i class=\"hd\">$name<\/i><i class=\"hs\">'&nbsp;not&nbsp;set.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$native&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">$native&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">ActiveRow&nbsp;<\/i><i class=\"hk\">?&nbsp;new&nbsp;static(<\/i><i class=\"hd\">$native<\/i><i class=\"hk\">)&nbsp;:&nbsp;<\/i><i class=\"hd\">$native<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__set<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__isset<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">])&nbsp;||&nbsp;isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">values<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">])&nbsp;||&nbsp;isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">isPersisted<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">hasRow<\/i><i class=\"hk\">()&nbsp;&amp;&amp;&nbsp;!<\/i><i class=\"hd\">count<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">checkRow<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">hasRow<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\InvalidStateException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'Row&nbsp;not&nbsp;set&nbsp;yet.'<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">reload<\/i><i class=\"hk\">(<\/i><i class=\"hd\">ActiveRow&nbsp;$row<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">row&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">modified&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">values&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F15":{"name":"ModulIS\\Reflection\\EntityProperty.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Reflection\\EntityProperty.php","lines":{"27":-2,"34":-1,"35":-1,"47":1,"49":1,"50":1,"59":-1,"61":-1,"63":-1,"64":-1,"69":1,"76":1,"77":-2,"83":-2,"97":-2,"103":-2,"109":-2,"118":1,"119":1,"121":1,"123":-2,"129":-2,"135":-2,"140":1,"141":-2,"147":-2,"152":1,"153":-2,"159":-2,"25":1,"26":1,"91":1,"93":1,"96":1,"11":1,"20":1,"32":1,"38":1,"39":1,"40":1,"45":1,"53":1,"55":1,"57":1,"67":1,"73":1,"82":1,"102":1,"108":1,"114":1,"116":1,"117":1,"128":1,"134":1,"146":1,"158":1,"161":1},"coverage":86,"total":44,"class":null,"digits":4,"lineCount":161,"content":"<code style='margin-left: 4em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Reflection<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">ModulIS\\Entity<\/i><i class=\"hk\">;\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">EntityProperty\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">(\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">EntityType&nbsp;$reflection<\/i><i class=\"hk\">,\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">,\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">string&nbsp;$type<\/i><i class=\"hk\">,\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">bool&nbsp;$nullable<\/i><i class=\"hk\">,\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">bool&nbsp;$readonly\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Entity&nbsp;$entity<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">setType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">toRecord<\/i><i class=\"hk\">()-&gt;{<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()});\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">setValue<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Entity&nbsp;$entity<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isReadonly<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$ref&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Exception\\MemberAccessException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Cannot&nbsp;write&nbsp;to&nbsp;a&nbsp;read-only&nbsp;property&nbsp;<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()}<\/i><i class=\"hs\">::\\$<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()}<\/i><i class=\"hs\">.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">checkType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">toRecord<\/i><i class=\"hk\">()-&gt;{<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()}&nbsp;=&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">checkType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">bool&nbsp;$need&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">nullable<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$entity&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getEntityReflection<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Exception\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Property&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">}<\/i><i class=\"hs\">::\\$<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()}<\/i><i class=\"hs\">'&nbsp;cannot&nbsp;be&nbsp;null.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isOfExtraType<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(!<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isOfNativeType<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$class&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!(<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">)&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">get_parent_class<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">)&nbsp;!==&nbsp;<\/i><i class=\"hs\">'ModulIS\\Datatype\\Datatype'<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Exception\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Instance&nbsp;of&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">}<\/i><i class=\"hs\">'&nbsp;expected,&nbsp;'\"\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">.&nbsp;((<\/i><i class=\"hd\">$valtype&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">gettype<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">))&nbsp;===&nbsp;<\/i><i class=\"hs\">'object'&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">::class&nbsp;:&nbsp;<\/i><i class=\"hd\">$valtype<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hs\">\"'&nbsp;given.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(<\/i><i class=\"hd\">$need&nbsp;<\/i><i class=\"hk\">&amp;&amp;&nbsp;!<\/i><i class=\"hd\">call_user_func<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'is_'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">(),&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">getConvertedType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">())&nbsp;!==&nbsp;<\/i><i class=\"hd\">get_debug_type<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ModulIS\\Exception\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Invalid&nbsp;type&nbsp;for&nbsp;column&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()}<\/i><i class=\"hs\">'&nbsp;-&nbsp;'<\/i><i class=\"hk\">{<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()}<\/i><i class=\"hs\">'&nbsp;expected,&nbsp;'\"&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">get_debug_type<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hs\">\"'&nbsp;given.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">string\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">type<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">setType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Type&nbsp;casting&nbsp;needed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">if(!<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">checkType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">settype<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">());\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">isOfNativeType<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">isNativeType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">type<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">isOfExtraType<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">isExtraType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">type<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">getConvertedType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$type<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">string\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(<\/i><i class=\"hd\">$type<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'array'<\/i><i class=\"hk\">:\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hs\">'string'<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;<\/i><i class=\"hs\">'bool'<\/i><i class=\"hk\">:\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hs\">'int'<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$type<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">isNativeType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$type<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">in_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$type<\/i><i class=\"hk\">,&nbsp;[<\/i><i class=\"hs\">'int'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'float'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'double'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'bool'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'string'<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'array'<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;function&nbsp;<\/i><i class=\"hd\">isExtraType<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$type<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$type&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">\\Nette\\Utils\\DateTime<\/i><i class=\"hk\">::class;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getEntityReflection<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">EntityType\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">reflection<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">string\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">name<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">isNullable<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">nullable<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">isReadonly<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">readonly<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F16":{"name":"ModulIS\\Reflection\\EntityType.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Reflection\\EntityType.php","lines":{"19":-2,"25":-2,"32":-2,"49":-1,"56":-1,"58":-1,"89":-2,"17":1,"18":1,"24":1,"30":1,"31":1,"37":1,"39":1,"41":1,"43":1,"45":1,"47":1,"52":1,"54":1,"62":1,"63":1,"64":1,"65":1,"66":1,"73":1,"78":1,"79":1,"83":1,"84":1,"86":1,"88":1,"91":1},"coverage":90,"total":29,"class":null,"digits":3,"lineCount":91,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS\\Reflection<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">ModulIS<\/i><i class=\"hk\">;\r<br>use&nbsp;<\/i><i class=\"hd\">ModulIS\\Exception<\/i><i class=\"hk\">;\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">EntityType&nbsp;<\/i><i class=\"hk\">extends&nbsp;<\/i><i class=\"hd\">\\ReflectionClass\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;?array&nbsp;<\/i><i class=\"hd\">$properties<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getEntityProperties<\/i><i class=\"hk\">():&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">loadEntityProperties<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">properties<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getEntityProperty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">):&nbsp;?<\/i><i class=\"hd\">EntityProperty\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">hasEntityProperty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">)&nbsp;?&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">properties<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]&nbsp;:&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">hasEntityProperty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$name<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">loadEntityProperties<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">properties<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$name<\/i><i class=\"hk\">]);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">loadEntityProperties<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">properties<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">properties&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getClassTree<\/i><i class=\"hk\">()&nbsp;as&nbsp;<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">getProperties<\/i><i class=\"hk\">()&nbsp;as&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isPublic<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\InvalidPropertyDefinitionException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'Missing&nbsp;type&nbsp;of&nbsp;property&nbsp;\"'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()&nbsp;.&nbsp;<\/i><i class=\"hs\">'\"'<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$readonly&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">false<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getAttributes<\/i><i class=\"hk\">()&nbsp;as&nbsp;<\/i><i class=\"hd\">$attribute<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$attribute<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()&nbsp;===&nbsp;<\/i><i class=\"hs\">'ModulIS\\Attribute\\ReadonlyProperty'<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$readonly&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">properties<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()]&nbsp;=&nbsp;new&nbsp;<\/i><i class=\"hd\">EntityProperty<\/i><i class=\"hk\">(\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">::<\/i><i class=\"hd\">getReflection<\/i><i class=\"hk\">(),\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">(),\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">(),\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$property<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getType<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">allowsNull<\/i><i class=\"hk\">(),\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$readonly\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">getClassTree<\/i><i class=\"hk\">():&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$tree&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$current&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$tree<\/i><i class=\"hk\">[]&nbsp;=&nbsp;<\/i><i class=\"hd\">$current<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$current&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">get_parent_class<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$current<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(<\/i><i class=\"hd\">$current&nbsp;<\/i><i class=\"hk\">!==&nbsp;<\/i><i class=\"hd\">false&nbsp;<\/i><i class=\"hk\">&amp;&amp;&nbsp;<\/i><i class=\"hd\">$current&nbsp;<\/i><i class=\"hk\">!==&nbsp;<\/i><i class=\"hd\">ModulIS\\Entity<\/i><i class=\"hk\">::class);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">array_reverse<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$tree<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F17":{"name":"ModulIS\\Repository.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Repository.php","lines":{"33":-1,"38":-1,"47":-2,"54":-1,"55":-1,"70":-2,"77":-2,"84":-2,"91":-2,"96":-1,"97":-2,"106":-2,"115":1,"117":-1,"120":1,"122":1,"124":1,"126":1,"127":-2,"134":-2,"140":-2,"160":-1,"161":-1,"167":-2,"180":-1,"181":-2,"189":-1,"190":-2,"196":-2,"205":-1,"206":-1,"214":-2,"222":-1,"223":-2,"228":1,"229":-2,"237":1,"239":-1,"242":1,"244":1,"246":1,"248":1,"249":-2,"258":-2,"52":1,"59":1,"62":1,"64":1,"66":1,"69":1,"75":1,"76":1,"89":1,"90":1,"139":1,"152":1,"172":1,"173":1,"175":1,"177":1,"257":1,"82":1,"83":1,"105":1,"132":1,"133":1,"26":1,"27":1,"29":1,"31":1,"36":1,"40":1,"45":1,"46":1,"145":1,"147":1,"149":1,"150":1,"155":1,"156":1,"158":1,"164":1,"165":1,"166":1,"195":1,"201":1,"203":1,"208":1,"213":1,"260":1},"coverage":80,"total":71,"class":null,"digits":4,"lineCount":260,"content":"<code style='margin-left: 4em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">Nette<\/i><i class=\"hk\">;\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\Explorer<\/i><i class=\"hk\">;\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\IRow<\/i><i class=\"hk\">;\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\Table\\Selection<\/i><i class=\"hk\">;\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Utils\\ArrayHash<\/i><i class=\"hk\">;\r<br>\r<br>abstract&nbsp;class&nbsp;<\/i><i class=\"hd\">Repository\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">Explorer&nbsp;$database<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">string&nbsp;$table<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;<\/i><i class=\"hd\">string&nbsp;$entity<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">Transaction&nbsp;$transaction<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Explorer&nbsp;$database<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">database&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$database<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">transaction&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">Transaction<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$database<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getConnection<\/i><i class=\"hk\">());\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$ref&nbsp;<\/i><i class=\"hk\">=&nbsp;new&nbsp;<\/i><i class=\"hd\">\\ReflectionClass<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">table<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\InvalidStateException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'Table&nbsp;name&nbsp;not&nbsp;set.&nbsp;Use&nbsp;class&nbsp;property&nbsp;'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()&nbsp;.&nbsp;<\/i><i class=\"hs\">'::$table'<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\InvalidStateException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'Entity&nbsp;class&nbsp;not&nbsp;set.&nbsp;Use&nbsp;class&nbsp;property&nbsp;'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$ref<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getName<\/i><i class=\"hk\">()&nbsp;.&nbsp;<\/i><i class=\"hs\">'::$entity'<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">createEntity<\/i><i class=\"hk\">(?<\/i><i class=\"hd\">\\Nette\\Database\\Table\\ActiveRow&nbsp;$row&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">Entity\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$class&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">fetchPairs<\/i><i class=\"hk\">(?<\/i><i class=\"hd\">string&nbsp;$key&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">string<\/i><i class=\"hk\">|array|<\/i><i class=\"hd\">null&nbsp;$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;array&nbsp;<\/i><i class=\"hd\">$criteria&nbsp;<\/i><i class=\"hk\">=&nbsp;[],&nbsp;?<\/i><i class=\"hd\">string&nbsp;$order&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">string&nbsp;$separator&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'&nbsp;'<\/i><i class=\"hk\">):&nbsp;array\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">is_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$valueColumn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'CONCAT_WS(\"'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$separator&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\",&nbsp;'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">implode<\/i><i class=\"hk\">(<\/i><i class=\"hs\">','<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hs\">')&nbsp;AS&nbsp;custom_column'<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$value&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hs\">'custom_column'<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$valueColumn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$table&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getTable<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">select<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">table&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'.'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">.&nbsp;(<\/i><i class=\"hd\">$key&nbsp;<\/i><i class=\"hk\">&amp;&amp;&nbsp;<\/i><i class=\"hd\">$valueColumn&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hs\">','&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">)&nbsp;.&nbsp;<\/i><i class=\"hd\">$valueColumn<\/i><i class=\"hk\">)-&gt;<\/i><i class=\"hd\">where<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$criteria<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$order<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$table<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">order<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$order<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$table<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">fetchPairs<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$key<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$value<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getByID<\/i><i class=\"hk\">(<\/i><i class=\"hd\">int<\/i><i class=\"hk\">|<\/i><i class=\"hd\">string&nbsp;$id<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$selection&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getTable<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">wherePrimary<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$id<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">createEntityFromSelection<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$selection<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getBy<\/i><i class=\"hk\">(array&nbsp;<\/i><i class=\"hd\">$criteria<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$selection&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getTable<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">where<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$criteria<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">createEntityFromSelection<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$selection<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">findBy<\/i><i class=\"hk\">(array&nbsp;<\/i><i class=\"hd\">$criteria<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">EntityCollection\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$selection&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getTable<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">where<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$criteria<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">createCollection<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$selection<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">findAll<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">EntityCollection\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">findBy<\/i><i class=\"hk\">([]);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Save&nbsp;single&nbsp;instance&nbsp;from&nbsp;database\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">save<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Entity&nbsp;$entity<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">persist<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Save&nbsp;collection&nbsp;by&nbsp;transaction\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@note&nbsp;Array&nbsp;or&nbsp;Arrash&nbsp;hash&nbsp;must&nbsp;have&nbsp;entity&nbsp;inside\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">saveCollection<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">EntityCollection<\/i><i class=\"hk\">|<\/i><i class=\"hd\">ArrayHash&nbsp;$collection<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isCollectionEmpty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$collection<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">(function()&nbsp;use&nbsp;(<\/i><i class=\"hd\">$collection<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$collection&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">persist<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;<\/i><i class=\"hd\">createEntityFromSelection<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Selection&nbsp;$selection<\/i><i class=\"hk\">):&nbsp;?<\/i><i class=\"hd\">Entity\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$row&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$selection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">fetch<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$row&nbsp;<\/i><i class=\"hk\">===&nbsp;<\/i><i class=\"hd\">null&nbsp;<\/i><i class=\"hk\">?&nbsp;<\/i><i class=\"hd\">null&nbsp;<\/i><i class=\"hk\">:&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">createEntity<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$row<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;<\/i><i class=\"hd\">createCollection<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Selection&nbsp;$selection<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$entity&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$refTable&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$refColumn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">EntityCollection\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;<\/i><i class=\"hd\">EntityCollection<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$selection<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$entity&nbsp;<\/i><i class=\"hk\">??&nbsp;[<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hs\">'createEntity'<\/i><i class=\"hk\">],&nbsp;<\/i><i class=\"hd\">$refTable<\/i><i class=\"hk\">,&nbsp;<\/i><i class=\"hd\">$refColumn<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">persist<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Entity&nbsp;$entity<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">checkEntity<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">(function()&nbsp;use&nbsp;(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$record&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">toRecord<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">hasRow<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">update<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$inserted&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getTable<\/i><i class=\"hk\">()\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<\/i><i class=\"hd\">insert<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getModified<\/i><i class=\"hk\">());\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$inserted&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">IRow<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\InvalidStateException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'Insert&nbsp;did&nbsp;not&nbsp;return&nbsp;instance&nbsp;of&nbsp;'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">IRow<\/i><i class=\"hk\">::class&nbsp;.&nbsp;<\/i><i class=\"hs\">'.&nbsp;'\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'Does&nbsp;table&nbsp;\"'&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">table&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hs\">'\"&nbsp;have&nbsp;primary&nbsp;key&nbsp;defined?&nbsp;If&nbsp;so,&nbsp;try&nbsp;cleaning&nbsp;cache.'<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">setRow<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$inserted<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">delete<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Entity&nbsp;$entity<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">checkEntity<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$record&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">toRecord<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">hasRow<\/i><i class=\"hk\">())\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">(fn()&nbsp;=&gt;&nbsp;<\/i><i class=\"hd\">$record<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getRow<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">delete<\/i><i class=\"hk\">()&nbsp;&gt;&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">true<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@deprecated\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">remove<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Entity&nbsp;$entity<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">delete<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">getTable<\/i><i class=\"hk\">(?<\/i><i class=\"hd\">string&nbsp;$table&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">Selection\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">database<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">table<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$table&nbsp;<\/i><i class=\"hk\">??&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">table<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;protected&nbsp;function&nbsp;<\/i><i class=\"hd\">checkEntity<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Entity&nbsp;$entity<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$class&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">entity<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!<\/i><i class=\"hd\">$entity&nbsp;<\/i><i class=\"hk\">instanceof&nbsp;<\/i><i class=\"hd\">$class<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\InvalidArgumentException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">\"Instance&nbsp;of&nbsp;'<\/i><i class=\"hd\">$class<\/i><i class=\"hs\">'&nbsp;expected,&nbsp;'\"\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">.&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">::class&nbsp;.&nbsp;<\/i><i class=\"hs\">\"'&nbsp;given.\"<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;protected&nbsp;function&nbsp;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">(<\/i><i class=\"hd\">\\Closure&nbsp;$callback<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$callback<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Return&nbsp;ResultSet&nbsp;by&nbsp;custom&nbsp;SQL\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">query<\/i><i class=\"hk\">(<\/i><i class=\"hd\">string&nbsp;$sql<\/i><i class=\"hk\">,&nbsp;...<\/i><i class=\"hd\">$params<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">Nette\\Database\\ResultSet\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">database<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">query<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$sql<\/i><i class=\"hk\">,&nbsp;...<\/i><i class=\"hd\">$params<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">isCollectionEmpty<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">EntityCollection<\/i><i class=\"hk\">|<\/i><i class=\"hd\">ArrayHash&nbsp;$collection<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(!<\/i><i class=\"hd\">is_array<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$collection<\/i><i class=\"hk\">)&nbsp;&amp;&amp;&nbsp;<\/i><i class=\"hd\">$collection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">count<\/i><i class=\"hk\">()&nbsp;===&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">)&nbsp;||&nbsp;!<\/i><i class=\"hd\">$collection<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Remove&nbsp;collection&nbsp;by&nbsp;transaction\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">removeCollection<\/i><i class=\"hk\">(array|<\/i><i class=\"hd\">EntityCollection<\/i><i class=\"hk\">|<\/i><i class=\"hd\">ArrayHash&nbsp;$collection<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">isCollectionEmpty<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$collection<\/i><i class=\"hk\">))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">null<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">(function()&nbsp;use&nbsp;(<\/i><i class=\"hd\">$collection<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(<\/i><i class=\"hd\">$collection&nbsp;<\/i><i class=\"hk\">as&nbsp;<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">delete<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$entity<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hc\">\/**\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Remove&nbsp;single&nbsp;instance&nbsp;from&nbsp;database&nbsp;by&nbsp;ID\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*\/\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">public&nbsp;function&nbsp;<\/i><i class=\"hd\">removeByID<\/i><i class=\"hk\">(<\/i><i class=\"hd\">int<\/i><i class=\"hk\">|<\/i><i class=\"hd\">string&nbsp;$id<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">bool\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(bool)&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getTable<\/i><i class=\"hk\">()-&gt;<\/i><i class=\"hd\">wherePrimary<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$id<\/i><i class=\"hk\">)-&gt;<\/i><i class=\"hd\">delete<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"},"F18":{"name":"ModulIS\\Transaction.php","file":"C:\\xampp\\htdocs\\orm\\src\\ModulIS\\Transaction.php","lines":{"39":-1,"41":-1,"42":-1,"44":-2,"60":-1,"72":-1,"74":-1,"77":-1,"78":-1,"84":-2,"19":1,"21":1,"23":1,"25":1,"32":1,"33":1,"34":1,"36":1,"49":1,"51":1,"53":1,"58":1,"63":1,"65":1,"67":1,"83":1,"86":1},"coverage":68,"total":25,"class":null,"digits":3,"lineCount":86,"content":"<code style='margin-left: 3em'><i class=\"hh\">\n<i class=\"hd\">&lt;?php\r<br>\r<br><\/i><i class=\"hk\">declare(<\/i><i class=\"hd\">strict_types<\/i><i class=\"hk\">=<\/i><i class=\"hd\">1<\/i><i class=\"hk\">);\r<br>\r<br>namespace&nbsp;<\/i><i class=\"hd\">ModulIS<\/i><i class=\"hk\">;\r<br>\r<br>use&nbsp;<\/i><i class=\"hd\">Nette\\Database\\Connection<\/i><i class=\"hk\">;\r<br>\r<br>\r<br>class&nbsp;<\/i><i class=\"hd\">Transaction\r<br><\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;<\/i><i class=\"hd\">Connection&nbsp;$connection<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;array&nbsp;<\/i><i class=\"hd\">$transactionCounter&nbsp;<\/i><i class=\"hk\">=&nbsp;[];\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">__construct<\/i><i class=\"hk\">(<\/i><i class=\"hd\">Connection&nbsp;$connection<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">connection&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$connection<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$transactionCounter<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$dsn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getDsnKey<\/i><i class=\"hk\">()]))\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$transactionCounter<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$dsn<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">transaction<\/i><i class=\"hk\">(<\/i><i class=\"hd\">\\Closure&nbsp;$callback<\/i><i class=\"hk\">):&nbsp;<\/i><i class=\"hd\">mixed\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">begin<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$return&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$callback<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">commit<\/i><i class=\"hk\">();\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">$return<\/i><i class=\"hk\">;\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(<\/i><i class=\"hd\">\\Exception&nbsp;$e<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">rollback<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;<\/i><i class=\"hd\">$e<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">begin<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$transactionCounter<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getDsnKey<\/i><i class=\"hk\">()]++&nbsp;===&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">connection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">beginTransaction<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">commit<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$transactionCounter<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$dsn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getDsnKey<\/i><i class=\"hk\">()]&nbsp;===&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;<\/i><i class=\"hd\">Exception\\InvalidStateException<\/i><i class=\"hk\">(<\/i><i class=\"hs\">'No&nbsp;transaction&nbsp;started.'<\/i><i class=\"hk\">);\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(--<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$transactionCounter<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$dsn<\/i><i class=\"hk\">]&nbsp;===&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">connection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">commit<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;<\/i><i class=\"hd\">rollback<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">void\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$transactionCounter<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$dsn&nbsp;<\/i><i class=\"hk\">=&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getDsnKey<\/i><i class=\"hk\">()]&nbsp;!==&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">)\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">connection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">rollBack<\/i><i class=\"hk\">();\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hd\">self<\/i><i class=\"hk\">::<\/i><i class=\"hd\">$transactionCounter<\/i><i class=\"hk\">[<\/i><i class=\"hd\">$dsn<\/i><i class=\"hk\">]&nbsp;=&nbsp;<\/i><i class=\"hd\">0<\/i><i class=\"hk\">;\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>\r<br>\r<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;<\/i><i class=\"hd\">getDsnKey<\/i><i class=\"hk\">():&nbsp;<\/i><i class=\"hd\">string\r<br>&nbsp;&nbsp;&nbsp;&nbsp;<\/i><i class=\"hk\">{\r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<\/i><i class=\"hd\">sha1<\/i><i class=\"hk\">(<\/i><i class=\"hd\">$this<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">connection<\/i><i class=\"hk\">-&gt;<\/i><i class=\"hd\">getDsn<\/i><i class=\"hk\">());\r<br>&nbsp;&nbsp;&nbsp;&nbsp;}\r<br>}\r<br><\/i>\n<\/i>\n<\/code>"}};
		let _directories = {"files":{"classmap.php":"F0","ModulIS":{"name":"ModulIS","count":18,"coverage":1175,"files":{"Attribute":{"name":"ModulIS\\Attribute","count":1,"coverage":0,"files":{"ReadonlyProperty.php":"F1"}},"Datatype":{"name":"ModulIS\\Datatype","count":4,"coverage":333,"files":{"Boolean.php":"F2","Datatype.php":"F3","DateTime.php":"F4","Json.php":"F5"}},"Entity.php":"F6","EntityCollection.php":"F7","Exception":{"name":"ModulIS\\Exception","count":5,"coverage":200,"files":{"InvalidArgumentException.php":"F8","InvalidPropertyDefinitionException.php":"F9","InvalidStateException.php":"F10","MemberAccessException.php":"F11","NotSupportedException.php":"F12"}},"MySqlDriver.php":"F13","Record.php":"F14","Reflection":{"name":"ModulIS\\Reflection","count":2,"coverage":176,"files":{"EntityProperty.php":"F15","EntityType.php":"F16"}},"Repository.php":"F17","Transaction.php":"F18"}}}};
		let isFilesInitialized = false;
		let isDirectoriesInitialized = false;

		let sort = 'coverage';
		let desc = true;
		let classes = {
			'1': 't', // tested
			'-1': 'u', // untested
			'-2': 'dead', // dead code
		};

		function getSortedKeys() {
			switch (sort) {
				case 'coverage':
					let sortedFiles = [];
					for (let i in _files) {
						sortedFiles.push([i, _files[i].coverage]);
					}

					sortedFiles.sort(function(a, b) {
						return desc ? (b[1] - a[1]) : (a[1] - b[1]);
					});

					let filesByCoverage = [];
					for (let i = 0; i < sortedFiles.length; i++) {
						filesByCoverage.push(sortedFiles[i][0]);
					}
					return filesByCoverage;

				case 'path':
					return sortAlphabetically(_files, desc);

				default:
					return Object.keys(_files).sort((a, b) => desc ? (b-a) : (a-b));
			}
		}

		function sortAlphabetically(obj, isDesc) {
			let sorted = [];
			for (let i in obj) {
				sorted.push([i, obj[i].name]);
			}

			sorted.sort(function(a, b) {
				let compared = a[1].localeCompare(b[1]);
				return compared === -1 ? (isDesc ? 1 : -1) : (compared === 1 ? (isDesc ? -1 : 1) : 0);
			});

			let out = [];
			for (let i = 0; i < sorted.length; i++) {
				out.push(sorted[i][0]);
			}
			return out;
		}

		function initDirectories() {
			if (isDirectoriesInitialized) {
				return;
			}
			let el = document.getElementById('tree');
			el.innerHTML = createDirectory(_directories.files);
			isDirectoriesInitialized = true;
		}

		function createDirectory(directory) {
			let out = '';
			Object.keys(directory).sort(function(a, b) {
				let aIsFile = a.endsWith('.php');
				let bIsFile = b.endsWith('.php');
				if ((aIsFile || bIsFile) && !(aIsFile && bIsFile)) {
					return aIsFile ? 1 : -1;
				}
				let compared = a.localeCompare(b);
				return compared === -1 ? -1 : (compared === 1 ? 1 : 0);
			}).forEach(function(i) {
				let dir = directory[i];
				let id, coverage;
				let isFile = typeof dir === 'string';
				if (isFile) {
					id = dir;
					dir = _files[dir];
					coverage = dir.coverage;
				} else {
					id = null;
					coverage = dir.count === 0 ? 0 : Math.round(dir.coverage / dir.count);
				}

				let html = createFileInfo(isFile ? ('D' + id) : dir.name, {
					coverage: coverage,
					name: isFile ? i : (i + ' <small>(' + dir.count + ')</small>'),
					class: isFile ? dir.class : 'dir',
				}, isFile ? 'toggle' : 'toggle-dir');

				if (isFile) {
					html += '<div class="code" id="D' + id + '"></div>';
				} else {
					html += '<div class="directory" id="' + dir.name + '">' + createDirectory(dir.files) + '</div>';
				}

				out += '<div>' + html + '</div>';
			});
			return out;
		}

		function initFiles(force) {
			if (!force && isFilesInitialized) {
				return;
			}
			let filesEl = document.getElementById('files-content');
			filesEl.innerHTML = '';

			getSortedKeys().forEach(function(i) {
				let file = _files[i];
				let html = createFileInfo(i, file);

				html += '<div class="code" id="' + i + '"></div>';

				let wrapper = document.createElement('div');
				wrapper.innerHTML = html;
				filesEl.appendChild(wrapper);
			});
			isFilesInitialized = true;
		}

		function createFileInfo(id, file, toggleClass) {
			toggleClass = toggleClass || 'toggle';
			return '<table>' +
				'<tbody><tr' + (file.class ? (' class="' + file.class + '"') : '') + '>' +
				'<td class="number"><small>' + file.coverage + ' %</small></td>' +
				'<td><div class="bar"><div style="width: ' + file.coverage + '%"></div></div></td>' +
				'<td><a href="#' + id + '" class="' + toggleClass + '">' + file.name + '</a></td>' +
				'</tr>' +
				'</tbody></table>';
		}

		function initFileContent(el) {
			if (el.hasAttribute('data-initialized')) {
				return;
			}

			let id = el.getAttribute('id');
			id = id.startsWith('D') ? id.split('D')[1] : id;
			let file = _files[id];
			if (!file) {
				return;
			}

			let aside = '';
			let prevClass = null;
			let closeTag = '', buffer = '';
			for (let i = 1; i < file.lineCount; i++) {
				let currentClass = file.lines[i] && classes[file.lines[i]] ? classes[file.lines[i]] : '';
				if (currentClass !== prevClass) {
					aside += (buffer + closeTag);
					buffer = '';
					closeTag = '</div>';
					aside += '<div' + (currentClass ? (' class="' + currentClass + '"') : '') + '>';
				}

				let currentId = id + 'L' + i;
				buffer += '<a href="#' + currentId + '" id="' + currentId + '">' + '&nbsp;'.repeat(file.digits - String(i).length) + i + "</a>";
				prevClass = currentClass;
			}
			aside += buffer + closeTag;

			el.innerHTML = '<div><aside>' + aside + '</aside>' + (file ? file.content : 'ERROR: Not available') + '</div>';

			el.setAttribute('data-initialized', 'true');
		}

		function addClickListener(className, callback) {
			document.body.addEventListener('click', function (e) {
				let isParent = e.target.parentNode && e.target.parentNode.classList.contains(className);
				if (isParent || e.target.classList.contains(className)) {
					callback.apply(isParent ? e.target.parentNode : e.target, [e]);
				}
			});
		}

		addClickListener('sort', function(e) {
			e.preventDefault();
			sort = this.getAttribute('data-sort');

			let sortItems = document.getElementsByClassName('sort');
			for (let i = 0; i < sortItems.length; i++) {
				if (sortItems[i] === this) {
					continue;
				}
				sortItems[i].classList.remove('asc');
				sortItems[i].classList.remove('desc');
			}

			desc = false;
			if (this.classList.contains('asc')) {
				desc = true;
				this.classList.remove('asc');
				this.classList.add('desc');
			} else {
				this.classList.remove('desc');
				this.classList.add('asc');
			}

			initFiles(true);
		});

		addClickListener('toggle', function(e) {
			e.preventDefault();
			let el = document.getElementById(this.href.split('#')[1]);
			if (el.style.display === 'block') {
				el.style.display = 'none';
			} else {
				initFileContent(el);
				el.style.display = 'block';
			}
		});

		addClickListener('toggle-dir', function(e) {
			e.preventDefault();
			let el = document.getElementById(this.href.split('#')[1]);
			if (el.classList.contains('opened')) {
				this.classList.remove('opened');
				el.classList.remove('opened');
			} else {
				this.classList.add('opened');
				el.classList.add('opened');
			}
		});

		addClickListener('tab-item', function(e) {
			e.preventDefault();
			let tabs = document.getElementsByClassName('tab-content');
			for (let i = 0; i < tabs.length; i++) {
				tabs[i].style.display = 'none';
			}
			let tabItems = document.getElementsByClassName('tab-item');
			for (let i = 0; i < tabItems.length; i++) {
				tabItems[i].classList.remove('active');
			}
			this.classList.add('active');

			let id = this.href.split('#')[1];
			if (id === 'files') {
				initFiles();
			} else {
				initDirectories();
			}

			let el = document.getElementById(id);
			if (el.style.display === 'block') {
				el.style.display = 'none';
			} else {
				el.style.display = 'block';
			}
		});

		document.addEventListener("DOMContentLoaded", function(event) {
			initFiles(true);

			let el = document.getElementById(window.location.hash.replace(/^#|L\d+$/g, ''));
			if (el) {
				initFileContent(el);
				el.style.display = 'block';
			}
		});
	})();
</script>
</body>
</html>
